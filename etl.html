<!doctype html><html lang=fr class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Atelier Neo4j"><meta name=author content="Hmida Hmida"><link rel=canonical href=https://hhmida.github.io/tp-nosql-neo4j/etl.html><link rel=prev href=cypher.html><link rel=next href=python.html><link rel=icon href=assets/images/neo4j-logo.svg><meta name=generator content="mkdocs-1.4.2, mkdocs-material-9.0.4"><title>Importation de données - Bases de données NoSQL avec Neo4j</title><link rel=stylesheet href=assets/stylesheets/main.9c788c91.min.css><link rel=stylesheet href=assets/stylesheets/palette.2505c338.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><link rel=stylesheet href=assets/stylesheets/extra.css><script>__md_scope=new URL(".",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=red> <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#importation-de-donnees-vers-neo4j class=md-skip> Aller au contenu </a> </div> <div data-md-component=announce> </div> <header class="md-header md-header--lifted" data-md-component=header> <nav class="md-header__inner md-grid" aria-label=En-tête> <a href=index.html title="Bases de données NoSQL avec Neo4j" class="md-header__button md-logo" aria-label="Bases de données NoSQL avec Neo4j" data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.629 13.227c-.593 0-1.139.2-1.58.533l-2.892-1.976a2.61 2.61 0 0 0 .101-.711 2.633 2.633 0 0 0-2.629-2.629A2.632 2.632 0 0 0 0 11.073a2.632 2.632 0 0 0 2.629 2.629c.593 0 1.139-.2 1.579-.533L7.1 15.145c-.063.226-.1.465-.1.711 0 .247.037.484.1.711l-2.892 1.976a2.608 2.608 0 0 0-1.579-.533A2.632 2.632 0 0 0 0 20.639a2.632 2.632 0 0 0 2.629 2.629 2.632 2.632 0 0 0 2.629-2.629c0-.247-.037-.485-.101-.711l2.892-1.976c.441.333.987.533 1.58.533a2.633 2.633 0 0 0 2.629-2.629c0-1.45-1.18-2.629-2.629-2.629ZM16.112.732c-4.72 0-7.888 2.748-7.888 8.082v3.802a3.525 3.525 0 0 1 3.071.008v-3.81c0-3.459 1.907-5.237 4.817-5.237s4.817 1.778 4.817 5.237v8.309H24V8.814C24 3.448 20.832.732 16.112.732Z"/></svg> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> Bases de données NoSQL avec Neo4j </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Importation de données </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=red aria-label="Basculer au mode sombre" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Basculer au mode sombre" for=__palette_2 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg> </label> <input class=md-option data-md-color-media data-md-color-scheme=slate data-md-color-primary=indigo data-md-color-accent=red aria-label="Basculer au mode clair" type=radio name=__palette id=__palette_2> <label class="md-header__button md-icon" title="Basculer au mode clair" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12c0-2.42-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg> </label> </form> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Rechercher placeholder=Rechercher autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </label> <nav class=md-search__options aria-label=Search> <button type=reset class="md-search__icon md-icon" title=Effacer aria-label=Effacer tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg> </button> </nav> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initialisation de la recherche </div> <ol class=md-search-result__list></ol> </div> </div> </div> </div> </div> </nav> <nav class=md-tabs aria-label=Onglets data-md-component=tabs> <div class="md-tabs__inner md-grid"> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=index.html class=md-tabs__link> Introduction </a> </li> <li class=md-tabs__item> <a href=installation.html class=md-tabs__link> Installation </a> </li> <li class=md-tabs__item> <a href=cypher.html class=md-tabs__link> Cypher </a> </li> <li class=md-tabs__item> <a href=etl.html class="md-tabs__link md-tabs__link--active"> Importation de données </a> </li> <li class=md-tabs__item> <a href=python.html class=md-tabs__link> Pilote Python </a> </li> <li class=md-tabs__item> <a href=cluster.html class=md-tabs__link> Cluster Neo4j </a> </li> </ul> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=index.html title="Bases de données NoSQL avec Neo4j" class="md-nav__button md-logo" aria-label="Bases de données NoSQL avec Neo4j" data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.629 13.227c-.593 0-1.139.2-1.58.533l-2.892-1.976a2.61 2.61 0 0 0 .101-.711 2.633 2.633 0 0 0-2.629-2.629A2.632 2.632 0 0 0 0 11.073a2.632 2.632 0 0 0 2.629 2.629c.593 0 1.139-.2 1.579-.533L7.1 15.145c-.063.226-.1.465-.1.711 0 .247.037.484.1.711l-2.892 1.976a2.608 2.608 0 0 0-1.579-.533A2.632 2.632 0 0 0 0 20.639a2.632 2.632 0 0 0 2.629 2.629 2.632 2.632 0 0 0 2.629-2.629c0-.247-.037-.485-.101-.711l2.892-1.976c.441.333.987.533 1.58.533a2.633 2.633 0 0 0 2.629-2.629c0-1.45-1.18-2.629-2.629-2.629ZM16.112.732c-4.72 0-7.888 2.748-7.888 8.082v3.802a3.525 3.525 0 0 1 3.071.008v-3.81c0-3.459 1.907-5.237 4.817-5.237s4.817 1.778 4.817 5.237v8.309H24V8.814C24 3.448 20.832.732 16.112.732Z"/></svg> </a> Bases de données NoSQL avec Neo4j </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=index.html class=md-nav__link> Introduction </a> </li> <li class=md-nav__item> <a href=installation.html class=md-nav__link> Installation </a> </li> <li class=md-nav__item> <a href=cypher.html class=md-nav__link> Cypher </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" data-md-toggle=toc type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> Importation de données <span class="md-nav__icon md-icon"></span> </label> <a href=etl.html class="md-nav__link md-nav__link--active"> Importation de données </a> <nav class="md-nav md-nav--secondary" aria-label="Table des matières"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table des matières </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#limportation-de-donnnees-dans-neo4j class=md-nav__link> L'importation de donnnées dans Neo4j </a> </li> <li class=md-nav__item> <a href=#importation-avec-neo4j-data-importer class=md-nav__link> Importation avec Neo4j Data Importer </a> </li> <li class=md-nav__item> <a href=#refactoring-post-importation-de-donnees class=md-nav__link> Refactoring post importation de données </a> </li> <li class=md-nav__item> <a href=#importer-les-donnees-avec-cypher class=md-nav__link> Importer les données avec Cypher </a> </li> <li class=md-nav__item> <a href=#exercice class=md-nav__link> Exercice </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=python.html class=md-nav__link> Pilote Python </a> </li> <li class=md-nav__item> <a href=cluster.html class=md-nav__link> Cluster Neo4j </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <p><img src="assets/images/etl/integration.svg " width=25% height=20%></p> <h1 id=importation-de-donnees-vers-neo4j>Importation de données vers Neo4j<a class=headerlink href=#importation-de-donnees-vers-neo4j title="Permanent link">&para;</a></h1> <hr> <h2 id=limportation-de-donnnees-dans-neo4j>L'importation de donnnées dans Neo4j<a class=headerlink href=#limportation-de-donnnees-dans-neo4j title="Permanent link">&para;</a></h2> <p>Lorsque vous importer des données dans Neo4j, vous avez typiquement un ensemble de fichiers sources qui ont été obtenus à partir de :</p> <ul> <li>SGBDR</li> <li>APIs Web</li> <li>Répertoires de données publics</li> <li>Outils de BI</li> <li>Excel</li> </ul> <p>Les types de fichiers sont typiquement CSV, JSON, XML, etc. Dans ce cours, vous apprendrer à importer des données CSV dans Neo4j en tant que noeuds, relations et leurs propriétés. Cypher possède une clause intégrée, LOAD CSV pour importer des fichiers CSV. Si vous avez un fichier JSON ou XML, vous dever utiliser la bibliothèque APOC pour importer les données, mais vous pouver aussi importer des CSV avec APOC. Et Neo4j Data Importer vous permet d'importer des données CSV sans écrire aucun code Cypher.</p> <p>Les données dans les fichiers sources peuvent contenir plus de données que ce dont vous avez besoin dans votre graphique. Il peut ne pas y avoir de correspondance 1-1 entre les données d'un fichier CSV et ce que vous utiliserier comme nœud dans un modèle de données de graphe. De plus, les données dans les fichiers sources peuvent représenter des types de données qui ne sont pas supportés par Neo4j ou spécifiés dans le modèle de données que vous implémenter. Certaines données dans les fichiers sources peuvent avoir besoin d'être transformées dans les types appropriés.</p> <p>Les types de données que vous pouver stocker comme propriétés dans Neo4j incluent :</p> <ul> <li>String </li> <li>Long </li> <li>Double </li> <li>Boolean</li> <li>Date/Datetime</li> <li>Point (Geospatial)</li> <li>StringArray </li> <li>LongArray </li> <li>DoubleArray </li> </ul> <p>Après avoir compris les données sources sur lesquelles vous dever travailler ainsi que le modèle de données graphique que vous aller implémenter, vous pouver importer les données dans Neo4j. Il y a deux façons d'importer des données CSV dans Neo4j que vous aller apprendre dans ce cours :</p> <ol> <li>Utiliser Neo4j Data Importer soit :<ul> <li>En ligne : <a href=https://data-importer.graphapp.io/ >https://data-importer.graphapp.io/</a></li> <li>Application <strong>Neo4j ETL Tool</strong> à installer sur Neo4j Desktop et disponible sur : <a href=https://install.graphapp.io/ >https://install.graphapp.io/</a></li> </ul> </li> <li>En écrivant du code Cypher pour effectuer l'importation.</li> </ol> <p>Dans les deux cas, l'importation implique la lecture des données sources et leur utilisation pour créer des noeuds, des relations et des propriétés dans le graphe.</p> <h2 id=importation-avec-neo4j-data-importer>Importation avec Neo4j Data Importer<a class=headerlink href=#importation-avec-neo4j-data-importer title="Permanent link">&para;</a></h2> <p>Le modèle de données graphique que vous aller mettre en œuvre est le suivant :</p> <p><img alt=model src=assets/images/etl/movie-data-model.png></p> <p>Remarquer les types des propriétés. Lorsque vous définisser le mapping pour l'importation, vous dever tenir compte des types qui peuvent être automatiquement mappés (chaîne, entier, décimal, date) et du fait que les valeurs clés de vos propriétés peuvent être différentes de celles des fichiers CSV.</p> <p><img alt=1⃣ class=twemoji src=https://cdnjs.cloudflare.com/ajax/libs/twemoji/14.0.2/svg/31-20e3.svg title=:one:> Télécharger les fichiers CSV</p> <ol> <li>Télécharger le fichier suivant <a href=assets/movieData.zip>movieData.zip <span class="twemoji heart"><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M288 32c0-17.7-14.3-32-32-32s-32 14.3-32 32v242.7l-73.4-73.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l128 128c12.5 12.5 32.8 12.5 45.3 0l128-128c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L288 274.7V32zM64 352c-35.3 0-64 28.7-64 64v32c0 35.3 28.7 64 64 64h384c35.3 0 64-28.7 64-64v-32c0-35.3-28.7-64-64-64H346.5l-45.3 45.3c-25 25-65.5 25-90.5 0L165.5 352H64zm368 104c-13.3 0-24-10.7-24-24s10.7-24 24-24 24 10.7 24 24-10.7 24-24 24z"/></svg></span></a> sur votre système :</li> <li>Décompresser ce fichier pour obtenir les fichiers :<ul> <li>persons.csv</li> <li>movies.csv</li> <li>ratings.csv</li> <li>directed.csv</li> <li>acted_in.csv</li> </ul> </li> </ol> <p><img alt=2⃣ class=twemoji src=https://cdnjs.cloudflare.com/ajax/libs/twemoji/14.0.2/svg/32-20e3.svg title=:two:> Accéder à Neo4j Data Importer : <a href=http://data-importer.graphapp.io/ >http://data-importer.graphapp.io/</a></p> <details class=warning open=open> <summary>Connexion</summary> <p>Pour une connexion locale non sécurisée, utiliser le protocole <em>http</em> et non https.</p> </details> <p>Dans une fenêtre de navigateur Web, ouvrer le Data Importer de Neo4j. Puis entrer les information de connexion à votre instance locale :</p> <p><img alt=connect src=assets/images/etl/connect.png></p> <p>Ensuite, vous devrier voir ceci :</p> <p><img alt=data-importer src=assets/images/etl/data-importer-c.png></p> <p><img alt=3⃣ class=twemoji src=https://cdnjs.cloudflare.com/ajax/libs/twemoji/14.0.2/svg/33-20e3.svg title=:three:> Charger les fichiers CSV dans l'importateur de données</p> <p>Dans l'onglet gauche <strong>Files</strong>, ajouter les cinq fichiers CSV que vous avez décompressés à l'étape 1.</p> <p>Après les avoir ajoutés, vous devrier voir ceci :</p> <p><img alt=files src=assets/images/etl/files-selected.png></p> <p><img alt=4⃣ class=twemoji src=https://cdnjs.cloudflare.com/ajax/libs/twemoji/14.0.2/svg/34-20e3.svg title=:four:> Définir le mapping des nœuds <strong>Person</strong></p> <ol> <li>Cliquer sur l'icône <code>Add node</code> dans le volet Modèle de graphique.</li> <li>Dans le volet Détails du mapping, à droite :</li> <li>Saisisser Person pour Label.</li> <li>Sélectionner le fichier persons.csv.</li> <li>Sous Properties, cliquer sur <code>Select from file</code>.<ol> <li>Sélectionner Tout.</li> <li>Cliquer sur Confirmer.</li> </ol> </li> </ol> <p><img alt=person-node src=assets/images/etl/person-node.png></p> <p>Remarquer que certains noms de propriétés ne correspondent pas au modèle de données du graphique. Modifier-les comme suit :</p> <ul> <li>person_tmdbId <span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M438.6 278.6c12.5-12.5 12.5-32.8 0-45.3l-160-160c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L338.8 224H32c-17.7 0-32 14.3-32 32s14.3 32 32 32h306.7L233.4 393.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l160-160z"/></svg></span> tmdbId</li> <li>person_imdbId <span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M438.6 278.6c12.5-12.5 12.5-32.8 0-45.3l-160-160c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L338.8 224H32c-17.7 0-32 14.3-32 32s14.3 32 32 32h306.7L233.4 393.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l160-160z"/></svg></span> imdbId</li> <li>person_poster <span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M438.6 278.6c12.5-12.5 12.5-32.8 0-45.3l-160-160c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L338.8 224H32c-17.7 0-32 14.3-32 32s14.3 32 32 32h306.7L233.4 393.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l160-160z"/></svg></span> poster</li> <li>person_url <span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M438.6 278.6c12.5-12.5 12.5-32.8 0-45.3l-160-160c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L338.8 224H32c-17.7 0-32 14.3-32 32s14.3 32 32 32h306.7L233.4 393.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l160-160z"/></svg></span> url</li> </ul> <p>Sélectionner tmdbId comme l'identifiant unique qui sera utilisé pour ces nœuds Person.</p> <p>Vous devrier voir un indicateur vert dans le panneau de gauche indiquant que toutes les propriétés ont été mappées : <img alt=person-mapped src=assets/images/etl/person-properties-mapped.png></p> <p><img alt=5⃣ class=twemoji src=https://cdnjs.cloudflare.com/ajax/libs/twemoji/14.0.2/svg/35-20e3.svg title=:five:> Définir le mapping des nœuds <strong>Movie</strong></p> <ol> <li>Répéter les étapes précédentes du nœud Person en utilisant le fichier movies.csv. </li> <li>Modifier les propriétés comme suit :<ul> <li>movie_tmdbId :right-arrow: <span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M438.6 278.6c12.5-12.5 12.5-32.8 0-45.3l-160-160c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L338.8 224H32c-17.7 0-32 14.3-32 32s14.3 32 32 32h306.7L233.4 393.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l160-160z"/></svg></span> tmdbId</li> <li>movie_imdbId <span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M438.6 278.6c12.5-12.5 12.5-32.8 0-45.3l-160-160c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L338.8 224H32c-17.7 0-32 14.3-32 32s14.3 32 32 32h306.7L233.4 393.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l160-160z"/></svg></span> imdbId</li> <li>movie_poster <span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M438.6 278.6c12.5-12.5 12.5-32.8 0-45.3l-160-160c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L338.8 224H32c-17.7 0-32 14.3-32 32s14.3 32 32 32h306.7L233.4 393.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l160-160z"/></svg></span> poster</li> <li>movie_url <span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M438.6 278.6c12.5-12.5 12.5-32.8 0-45.3l-160-160c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L338.8 224H32c-17.7 0-32 14.3-32 32s14.3 32 32 32h306.7L233.4 393.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l160-160z"/></svg></span> url</li> </ul> </li> <li>Remarquer également que certains types de propriétés ne correspondent pas à ce que notre modèle de données défini. Modifier les types de propriétés comme suit :<ul> <li>budget <span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M438.6 278.6c12.5-12.5 12.5-32.8 0-45.3l-160-160c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L338.8 224H32c-17.7 0-32 14.3-32 32s14.3 32 32 32h306.7L233.4 393.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l160-160z"/></svg></span> integer</li> <li>revenue <span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M438.6 278.6c12.5-12.5 12.5-32.8 0-45.3l-160-160c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L338.8 224H32c-17.7 0-32 14.3-32 32s14.3 32 32 32h306.7L233.4 393.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l160-160z"/></svg></span> integer</li> </ul> </li> <li>Sélectionner movieId comme l'identifiant unique qui sera utilisé pour ces nœuds Movie. Noter que nous avons sélectionné movieID comme ID unique car il est utilisé dans les autres fichiers lorsque nous définissons les relations avec les films.</li> </ol> <p><img alt=movie-mapped src=assets/images/etl/movie-nodes-mapped.png></p> <p><img alt=6⃣ class=twemoji src=https://cdnjs.cloudflare.com/ajax/libs/twemoji/14.0.2/svg/36-20e3.svg title=:six:> Définir le mapping des nœuds <strong>User</strong></p> <p>Dans le volet Détails du mapping, à droite :</p> <ul> <li>Entrer User pour l'étiquette.</li> <li>Sélectionner le fichier ratings.csv.</li> <li>Sous Propriétés, cliquer sur Ajouter à partir du fichier.</li> <li>Sélectionner uniquement les propriétés userId et name. Les autres valeurs seront utilisées ultérieurement pour définir les relations.</li> <li>Cliquer sur Confirmer.</li> <li>Confirmer que userId a été sélectionné comme ID ; il s'agit de l'ID unique qui sera utilisé pour ces nœuds User.</li> </ul> <p><img alt=user-mapped src=assets/images/etl/user-nodes-mapped.png></p> <p><img alt=7⃣ class=twemoji src=https://cdnjs.cloudflare.com/ajax/libs/twemoji/14.0.2/svg/37-20e3.svg title=:seven:> définisser le mapping des relations <strong>DIRECTED</strong></p> <ol> <li>Dans le volet Modèle de graphique, faites glisser le bord du nœud Person sur le nœud Movie. Ceci définira une relation entre ces nœuds dans le graphique.</li> <li>Dans le volet Détails du mapping, à droite :<ol> <li>Entrer DIRECTED pour le type.</li> <li>Sélectionner le fichier directed.csv.</li> <li>Dans la section <em>From</em> Sélectionner person_tmdbId comme ID de Person.</li> <li>Dans la section <em>To</em> Sélectionner movieId comme identifiant de Movie.</li> </ol> </li> </ol> <p><img alt=directed-mapped src=assets/images/etl/directed-mapped.png></p> <p><img alt=8⃣ class=twemoji src=https://cdnjs.cloudflare.com/ajax/libs/twemoji/14.0.2/svg/38-20e3.svg title=:eight:> définir le mapping des relations <strong>ACTED_IN</strong></p> <ol> <li>Répéter les opérations de l'étape précédente en utilisant le fichier acted_in.csv.</li> <li>Dans la section From Sélectionner person_tmdbId comme ID de Person. et dans From movieId comme ID de Movie.</li> <li>Dans la section Properties, sélectionner la propriété role.</li> </ol> <p><img alt=actedin-mapped src=assets/images/etl/actedin-mapped.png></p> <p><img alt=9⃣ class=twemoji src=https://cdnjs.cloudflare.com/ajax/libs/twemoji/14.0.2/svg/39-20e3.svg title=:nine:> Définir le mapping des relations <strong>RATED</strong></p> <p>Noter que ce mapping réutilisera le même fichier que vous avez utilisé pour définir les noeuds User ratings.csv.</p> <p>Dans le volet Détails du mapping, à droite : 1. Entrer RATED pour le type. 1. Sélectionner le fichier ratings.csv. 1. Dans la section From sélectionner userId comme ID de User. 1. Sélectionner movieId comme identifiant de Movie dans la section To. 1. Dans la section Propriétés, sélectionner la propriété rating et timestamp. 1. Madifer le type de rating <span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M438.6 278.6c12.5-12.5 12.5-32.8 0-45.3l-160-160c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L338.8 224H32c-17.7 0-32 14.3-32 32s14.3 32 32 32h306.7L233.4 393.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l160-160z"/></svg></span> integer</p> <p><img alt=rated-mapped src=assets/images/etl/rated-mapped.png></p> <p><img alt=1⃣ class=twemoji src=https://cdnjs.cloudflare.com/ajax/libs/twemoji/14.0.2/svg/31-20e3.svg title=:one:><img alt=0⃣ class=twemoji src=https://cdnjs.cloudflare.com/ajax/libs/twemoji/14.0.2/svg/30-20e3.svg title=:zero:> Enregistrer vos mappings</p> <p>Au cas où quelque chose se passerait mal pendant l'importation, nous vous recommandons de sauvegarder ce que vous avez mappé.</p> <ol> <li>Cliquer sur le bouton ... à droite du bouton <code>Run Import</code>.</li> <li>Sélectionner Télécharger le modèle. Le fichier portant le nom neo4j_importer_model_yyyy-mm-dd.json sera téléchargé sur votre système.</li> </ol> <p><img alt=1⃣ class=twemoji src=https://cdnjs.cloudflare.com/ajax/libs/twemoji/14.0.2/svg/31-20e3.svg title=:one:><img alt=1⃣ class=twemoji src=https://cdnjs.cloudflare.com/ajax/libs/twemoji/14.0.2/svg/31-20e3.svg title=:one:> Importer les données CSV</p> <p>Cliquer sur le bouton <code>Run Import</code>.</p> <p><img alt=run-import src=assets/images/etl/runimport.png></p> <p><img alt=1⃣ class=twemoji src=https://cdnjs.cloudflare.com/ajax/libs/twemoji/14.0.2/svg/31-20e3.svg title=:one:><img alt=2⃣ class=twemoji src=https://cdnjs.cloudflare.com/ajax/libs/twemoji/14.0.2/svg/32-20e3.svg title=:two:> Vérifier les données importées</p> <div class=highlight><pre><span></span><code><span class=k>MATCH</span><span class=w> </span><span class=p>(</span><span class=n>n</span><span class=p>)</span><span class=w> </span><span class=k>RETURN</span><span class=w> </span><span class=k>count</span><span class=p>(</span><span class=n>n</span><span class=p>)</span>
</code></pre></div> <p>Doit retourner 1097 noeuds.</p> <p><div class=highlight><pre><span></span><code><span class=k>MATCH</span><span class=w> </span><span class=p>()</span><span class=o>-</span><span class=p>[</span><span class=n>r</span><span class=p>]</span><span class=o>-&gt;</span><span class=p>()</span><span class=w> </span><span class=k>RETURN</span><span class=w> </span><span class=k>count</span><span class=p>(</span><span class=n>r</span><span class=p>)</span>
</code></pre></div> Devrait avoir 4065 relations.</p> <h2 id=refactoring-post-importation-de-donnees>Refactoring post importation de données<a class=headerlink href=#refactoring-post-importation-de-donnees title="Permanent link">&para;</a></h2> <p>Après avoir utilisé Data Importer pour importer les données, vous allez utiliser Cypher pour remanier les données importées. Le remaniement de ce modèle de données impliquera :</p> <ul> <li>Transformer les types de données de chaîne de caractères en liste de chaînes de caractères à valeurs multiples. <div class=highlight><pre><span></span><code><span class=k>MATCH</span><span class=w> </span><span class=p>(</span><span class=n>p</span><span class=p>:</span><span class=n>Person</span><span class=p>)</span>
<span class=k>SET</span><span class=w> </span><span class=n>p</span><span class=p>.</span><span class=n>born</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>CASE</span><span class=w> </span><span class=n>p</span><span class=p>.</span><span class=n>born</span><span class=w> </span><span class=k>WHEN</span><span class=w> </span><span class=ss>&quot;&quot;</span><span class=w> </span><span class=k>THEN</span><span class=w> </span><span class=k>null</span><span class=w> </span><span class=k>ELSE</span><span class=w> </span><span class=nb>date</span><span class=p>(</span><span class=n>p</span><span class=p>.</span><span class=n>born</span><span class=p>)</span><span class=w> </span><span class=k>END</span>
<span class=k>WITH</span><span class=w> </span><span class=n>p</span>
<span class=k>SET</span><span class=w> </span><span class=n>p</span><span class=p>.</span><span class=n>died</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>CASE</span><span class=w> </span><span class=n>p</span><span class=p>.</span><span class=n>died</span><span class=w> </span><span class=k>WHEN</span><span class=w> </span><span class=ss>&quot;&quot;</span><span class=w> </span><span class=k>THEN</span><span class=w> </span><span class=k>null</span><span class=w> </span><span class=k>ELSE</span><span class=w> </span><span class=nb>date</span><span class=p>(</span><span class=n>p</span><span class=p>.</span><span class=n>died</span><span class=p>)</span><span class=w> </span><span class=k>END</span>

<span class=k>MATCH</span><span class=w> </span><span class=p>(</span><span class=n>m</span><span class=p>:</span><span class=n>Movie</span><span class=p>)</span>
<span class=k>SET</span><span class=w> </span><span class=n>m</span><span class=p>.</span><span class=n>countries</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>split</span><span class=p>(</span><span class=k>coalesce</span><span class=p>(</span><span class=n>m</span><span class=p>.</span><span class=n>countries</span><span class=p>,</span><span class=ss>&quot;&quot;</span><span class=p>),</span><span class=w> </span><span class=ss>&quot;|&quot;</span><span class=p>),</span>
<span class=n>m</span><span class=p>.</span><span class=n>languages</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>split</span><span class=p>(</span><span class=k>coalesce</span><span class=p>(</span><span class=n>m</span><span class=p>.</span><span class=n>languages</span><span class=p>,</span><span class=ss>&quot;&quot;</span><span class=p>),</span><span class=w> </span><span class=ss>&quot;|&quot;</span><span class=p>),</span>
<span class=n>m</span><span class=p>.</span><span class=n>genres</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>split</span><span class=p>(</span><span class=k>coalesce</span><span class=p>(</span><span class=n>m</span><span class=p>.</span><span class=n>genres</span><span class=p>,</span><span class=ss>&quot;&quot;</span><span class=p>),</span><span class=w> </span><span class=ss>&quot;|&quot;</span><span class=p>)</span>
</code></pre></div></li> <li>Ajouter des Label Actor et Director aux nœuds Person. <div class=highlight><pre><span></span><code><span class=k>MATCH</span><span class=w> </span><span class=p>(</span><span class=n>p</span><span class=p>:</span><span class=n>Person</span><span class=p>)</span><span class=o>-</span><span class=p>[:</span><span class=n>ACTED_IN</span><span class=p>]</span><span class=o>-&gt;</span><span class=p>()</span>
<span class=k>WITH</span><span class=w> </span><span class=k>DISTINCT</span><span class=w> </span><span class=n>p</span><span class=w> </span><span class=k>SET</span><span class=w> </span><span class=n>p</span><span class=p>:</span><span class=n>Actor</span>
<span class=k>MATCH</span><span class=w> </span><span class=p>(</span><span class=n>p</span><span class=p>:</span><span class=n>Person</span><span class=p>)</span><span class=o>-</span><span class=p>[:</span><span class=n>DIRECTED</span><span class=p>]</span><span class=o>-&gt;</span><span class=p>()</span>
<span class=k>WITH</span><span class=w> </span><span class=k>DISTINCT</span><span class=w> </span><span class=n>p</span><span class=w> </span><span class=k>SET</span><span class=w> </span><span class=n>p</span><span class=p>:</span><span class=n>Director</span>
</code></pre></div></li> <li>Ajouter plus de contraintes selon le modèle de données du graphe. <div class=highlight><pre><span></span><code><span class=k>CREATE</span><span class=w> </span><span class=k>CONSTRAINT</span><span class=w> </span><span class=n>Genre_name</span><span class=w> </span><span class=k>IF</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>EXISTS</span>
<span class=k>FOR</span><span class=w> </span><span class=p>(</span><span class=n>x</span><span class=p>:</span><span class=n>Genre</span><span class=p>)</span>
<span class=n>REQUIRE</span><span class=w> </span><span class=n>x</span><span class=p>.</span><span class=n>name</span><span class=w> </span><span class=k>IS</span><span class=w> </span><span class=k>UNIQUE</span>
</code></pre></div></li> <li>Créer des noeuds Genre à partir des données des noeuds Movie. <div class=highlight><pre><span></span><code><span class=k>MATCH</span><span class=w> </span><span class=p>(</span><span class=n>m</span><span class=p>:</span><span class=n>Movie</span><span class=p>)</span>
<span class=n>UNWIND</span><span class=w> </span><span class=n>m</span><span class=p>.</span><span class=n>genres</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=n>genre</span>
<span class=k>WITH</span><span class=w> </span><span class=n>m</span><span class=p>,</span><span class=w> </span><span class=n>genre</span>
<span class=n>MERGE</span><span class=w> </span><span class=p>(</span><span class=k>g</span><span class=p>:</span><span class=n>Genre</span><span class=w> </span><span class=err>{</span><span class=n>name</span><span class=p>:</span><span class=n>genre</span><span class=err>}</span><span class=p>)</span>
<span class=n>MERGE</span><span class=w> </span><span class=p>(</span><span class=n>m</span><span class=p>)</span><span class=o>-</span><span class=p>[:</span><span class=n>IN_GENRE</span><span class=p>]</span><span class=o>-&gt;</span><span class=p>(</span><span class=k>g</span><span class=p>)</span>
<span class=k>MATCH</span><span class=w> </span><span class=p>(</span><span class=n>m</span><span class=p>:</span><span class=n>Movie</span><span class=p>)</span>
<span class=k>SET</span><span class=w> </span><span class=n>m</span><span class=p>.</span><span class=n>genres</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>null</span>
</code></pre></div></li> </ul> <h2 id=importer-les-donnees-avec-cypher>Importer les données avec Cypher<a class=headerlink href=#importer-les-donnees-avec-cypher title="Permanent link">&para;</a></h2> <p><img alt=1⃣ class=twemoji src=https://cdnjs.cloudflare.com/ajax/libs/twemoji/14.0.2/svg/31-20e3.svg title=:one:> Supprimer tous les noeuds et relations</p> <div class=highlight><pre><span></span><code><span class=k>MATCH</span><span class=w> </span><span class=p>(</span><span class=n>u</span><span class=p>:</span><span class=k>User</span><span class=p>)</span><span class=w> </span><span class=n>DETACH</span><span class=w> </span><span class=k>DELETE</span><span class=w> </span><span class=n>u</span><span class=p>;</span>
<span class=k>MATCH</span><span class=w> </span><span class=p>(</span><span class=n>p</span><span class=p>:</span><span class=n>Person</span><span class=p>)</span><span class=w> </span><span class=n>DETACH</span><span class=w> </span><span class=k>DELETE</span><span class=w> </span><span class=n>p</span><span class=p>;</span>
<span class=k>MATCH</span><span class=w> </span><span class=p>(</span><span class=n>m</span><span class=p>:</span><span class=n>Movie</span><span class=p>)</span><span class=w> </span><span class=n>DETACH</span><span class=w> </span><span class=k>DELETE</span><span class=w> </span><span class=n>m</span><span class=p>;</span>
<span class=k>MATCH</span><span class=w> </span><span class=p>(</span><span class=n>n</span><span class=p>)</span><span class=w> </span><span class=n>DETACH</span><span class=w> </span><span class=k>DELETE</span><span class=w> </span><span class=n>n</span>
</code></pre></div> <p><img alt=2⃣ class=twemoji src=https://cdnjs.cloudflare.com/ajax/libs/twemoji/14.0.2/svg/32-20e3.svg title=:two:> Ajouter les contraintes après vérification</p> <p>Vérifier avec :</p> <div class=highlight><pre><span></span><code><span class=k>SHOW</span><span class=w> </span><span class=k>CONSTRAINTS</span>
</code></pre></div> <p>4 contraintes <strong>Unique</strong> doivent être présentes :</p> <ul> <li>Person.tmdbId</li> <li>Movie.movieId</li> <li>User.userId</li> <li>Genre.name</li> </ul> <p>Sinon ajouter ces contraintes. Par exemple, pour Genre.name :</p> <div class=highlight><pre><span></span><code><span class=k>CREATE</span><span class=w> </span><span class=k>CONSTRAINT</span><span class=w> </span><span class=n>Genre_name</span><span class=w> </span><span class=k>IF</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>EXISTS</span>
<span class=k>FOR</span><span class=w> </span><span class=p>(</span><span class=n>x</span><span class=p>:</span><span class=n>Genre</span><span class=p>)</span>
<span class=n>REQUIRE</span><span class=w> </span><span class=n>x</span><span class=p>.</span><span class=n>name</span><span class=w> </span><span class=k>IS</span><span class=w> </span><span class=k>UNIQUE</span><span class=w> </span><span class=n>n</span>
</code></pre></div> <p><img alt=3⃣ class=twemoji src=https://cdnjs.cloudflare.com/ajax/libs/twemoji/14.0.2/svg/33-20e3.svg title=:three:> Importer Movie et Genre</p> <div class=highlight><pre><span></span><code><span class=p>:</span><span class=n>auto</span><span class=w> </span><span class=k>USING</span><span class=w> </span><span class=n>PERIODIC</span><span class=w> </span><span class=k>COMMIT</span>
<span class=k>LOAD</span><span class=w> </span><span class=n>CSV</span><span class=w> </span><span class=k>WITH</span><span class=w> </span><span class=n>HEADERS</span>
<span class=k>FROM</span><span class=w> </span><span class=s1>&#39;https://data.neo4j.com/importing/2-movieData.csv&#39;</span>
<span class=k>AS</span><span class=w> </span><span class=k>row</span>
<span class=o>//</span><span class=n>process</span><span class=w> </span><span class=k>only</span><span class=w> </span><span class=n>Movie</span><span class=w> </span><span class=k>rows</span>
<span class=k>WITH</span><span class=w> </span><span class=k>row</span><span class=w> </span><span class=k>WHERE</span><span class=w> </span><span class=k>row</span><span class=p>.</span><span class=n>Entity</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=ss>&quot;Movie&quot;</span>
<span class=n>MERGE</span><span class=w> </span><span class=p>(</span><span class=n>m</span><span class=p>:</span><span class=n>Movie</span><span class=w> </span><span class=err>{</span><span class=n>movieId</span><span class=p>:</span><span class=w> </span><span class=n>toInteger</span><span class=p>(</span><span class=k>row</span><span class=p>.</span><span class=n>movieId</span><span class=p>)</span><span class=err>}</span><span class=p>)</span>
<span class=k>ON</span><span class=w> </span><span class=k>CREATE</span><span class=w> </span><span class=k>SET</span>
<span class=n>m</span><span class=p>.</span><span class=n>tmdbId</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>toInteger</span><span class=p>(</span><span class=k>row</span><span class=p>.</span><span class=n>tmdbId</span><span class=p>),</span>
<span class=n>m</span><span class=p>.</span><span class=n>imdbId</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>toInteger</span><span class=p>(</span><span class=k>row</span><span class=p>.</span><span class=n>imdbId</span><span class=p>),</span>
<span class=n>m</span><span class=p>.</span><span class=n>imdbRating</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>toFloat</span><span class=p>(</span><span class=k>row</span><span class=p>.</span><span class=n>imdbRating</span><span class=p>),</span>
<span class=n>m</span><span class=p>.</span><span class=n>released</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>datetime</span><span class=p>(</span><span class=k>row</span><span class=p>.</span><span class=n>released</span><span class=p>),</span>
<span class=n>m</span><span class=p>.</span><span class=n>title</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>row</span><span class=p>.</span><span class=n>title</span><span class=p>,</span>
<span class=n>m</span><span class=p>.</span><span class=k>year</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>toInteger</span><span class=p>(</span><span class=k>row</span><span class=p>.</span><span class=k>year</span><span class=p>),</span>
<span class=n>m</span><span class=p>.</span><span class=n>poster</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>row</span><span class=p>.</span><span class=n>poster</span><span class=p>,</span>
<span class=n>m</span><span class=p>.</span><span class=n>runtime</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>toInteger</span><span class=p>(</span><span class=k>row</span><span class=p>.</span><span class=n>runtime</span><span class=p>),</span>
<span class=n>m</span><span class=p>.</span><span class=n>countries</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>split</span><span class=p>(</span><span class=k>coalesce</span><span class=p>(</span><span class=k>row</span><span class=p>.</span><span class=n>countries</span><span class=p>,</span><span class=ss>&quot;&quot;</span><span class=p>),</span><span class=w> </span><span class=ss>&quot;|&quot;</span><span class=p>),</span>
<span class=n>m</span><span class=p>.</span><span class=n>imdbVotes</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>toInteger</span><span class=p>(</span><span class=k>row</span><span class=p>.</span><span class=n>imdbVotes</span><span class=p>),</span>
<span class=n>m</span><span class=p>.</span><span class=n>revenue</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>toInteger</span><span class=p>(</span><span class=k>row</span><span class=p>.</span><span class=n>revenue</span><span class=p>),</span>
<span class=n>m</span><span class=p>.</span><span class=n>plot</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>row</span><span class=p>.</span><span class=n>plot</span><span class=p>,</span>
<span class=n>m</span><span class=p>.</span><span class=n>url</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>row</span><span class=p>.</span><span class=n>url</span><span class=p>,</span>
<span class=n>m</span><span class=p>.</span><span class=n>budget</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>toInteger</span><span class=p>(</span><span class=k>row</span><span class=p>.</span><span class=n>budget</span><span class=p>),</span>
<span class=n>m</span><span class=p>.</span><span class=n>languages</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>split</span><span class=p>(</span><span class=k>coalesce</span><span class=p>(</span><span class=k>row</span><span class=p>.</span><span class=n>languages</span><span class=p>,</span><span class=ss>&quot;&quot;</span><span class=p>),</span><span class=w> </span><span class=ss>&quot;|&quot;</span><span class=p>)</span>
<span class=k>WITH</span><span class=w> </span><span class=n>m</span><span class=p>,</span><span class=n>split</span><span class=p>(</span><span class=k>coalesce</span><span class=p>(</span><span class=k>row</span><span class=p>.</span><span class=n>genres</span><span class=p>,</span><span class=ss>&quot;&quot;</span><span class=p>),</span><span class=w> </span><span class=ss>&quot;|&quot;</span><span class=p>)</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=n>genres</span>
<span class=n>UNWIND</span><span class=w> </span><span class=n>genres</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=n>genre</span>
<span class=k>WITH</span><span class=w> </span><span class=n>m</span><span class=p>,</span><span class=w> </span><span class=n>genre</span>
<span class=n>MERGE</span><span class=w> </span><span class=p>(</span><span class=k>g</span><span class=p>:</span><span class=n>Genre</span><span class=w> </span><span class=err>{</span><span class=n>name</span><span class=p>:</span><span class=n>genre</span><span class=err>}</span><span class=p>)</span>
<span class=n>MERGE</span><span class=w> </span><span class=p>(</span><span class=n>m</span><span class=p>)</span><span class=o>-</span><span class=p>[:</span><span class=n>IN_GENRE</span><span class=p>]</span><span class=o>-&gt;</span><span class=p>(</span><span class=k>g</span><span class=p>)</span>
</code></pre></div> <p><img alt=4⃣ class=twemoji src=https://cdnjs.cloudflare.com/ajax/libs/twemoji/14.0.2/svg/34-20e3.svg title=:four:> Importer les données de Person</p> <div class=highlight><pre><span></span><code><span class=p>:</span><span class=n>auto</span><span class=w> </span><span class=k>USING</span><span class=w> </span><span class=n>PERIODIC</span><span class=w> </span><span class=k>COMMIT</span>
<span class=k>LOAD</span><span class=w> </span><span class=n>CSV</span><span class=w> </span><span class=k>WITH</span><span class=w> </span><span class=n>HEADERS</span>
<span class=k>FROM</span><span class=w> </span><span class=s1>&#39;https://data.neo4j.com/importing/2-movieData.csv&#39;</span>
<span class=k>AS</span><span class=w> </span><span class=k>row</span>
<span class=k>WITH</span><span class=w> </span><span class=k>row</span><span class=w> </span><span class=k>WHERE</span><span class=w> </span><span class=k>row</span><span class=p>.</span><span class=n>Entity</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=ss>&quot;Person&quot;</span>
<span class=n>MERGE</span><span class=w> </span><span class=p>(</span><span class=n>p</span><span class=p>:</span><span class=n>Person</span><span class=w> </span><span class=err>{</span><span class=n>tmdbId</span><span class=p>:</span><span class=w> </span><span class=n>toInteger</span><span class=p>(</span><span class=k>row</span><span class=p>.</span><span class=n>tmdbId</span><span class=p>)</span><span class=err>}</span><span class=p>)</span>
<span class=k>ON</span><span class=w> </span><span class=k>CREATE</span><span class=w> </span><span class=k>SET</span>
<span class=n>p</span><span class=p>.</span><span class=n>imdbId</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>toInteger</span><span class=p>(</span><span class=k>row</span><span class=p>.</span><span class=n>imdbId</span><span class=p>),</span>
<span class=n>p</span><span class=p>.</span><span class=n>bornIn</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>row</span><span class=p>.</span><span class=n>bornIn</span><span class=p>,</span>
<span class=n>p</span><span class=p>.</span><span class=n>name</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>row</span><span class=p>.</span><span class=n>name</span><span class=p>,</span>
<span class=n>p</span><span class=p>.</span><span class=n>bio</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>row</span><span class=p>.</span><span class=n>bio</span><span class=p>,</span>
<span class=n>p</span><span class=p>.</span><span class=n>poster</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>row</span><span class=p>.</span><span class=n>poster</span><span class=p>,</span>
<span class=n>p</span><span class=p>.</span><span class=n>url</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>row</span><span class=p>.</span><span class=n>url</span><span class=p>,</span>
<span class=n>p</span><span class=p>.</span><span class=n>born</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>CASE</span><span class=w> </span><span class=k>row</span><span class=p>.</span><span class=n>born</span><span class=w> </span><span class=k>WHEN</span><span class=w> </span><span class=ss>&quot;&quot;</span><span class=w> </span><span class=k>THEN</span><span class=w> </span><span class=k>null</span><span class=w> </span><span class=k>ELSE</span><span class=w> </span><span class=nb>date</span><span class=p>(</span><span class=k>row</span><span class=p>.</span><span class=n>born</span><span class=p>)</span><span class=w> </span><span class=k>END</span><span class=p>,</span>
<span class=n>p</span><span class=p>.</span><span class=n>died</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>CASE</span><span class=w> </span><span class=k>row</span><span class=p>.</span><span class=n>died</span><span class=w> </span><span class=k>WHEN</span><span class=w> </span><span class=ss>&quot;&quot;</span><span class=w> </span><span class=k>THEN</span><span class=w> </span><span class=k>null</span><span class=w> </span><span class=k>ELSE</span><span class=w> </span><span class=nb>date</span><span class=p>(</span><span class=k>row</span><span class=p>.</span><span class=n>died</span><span class=p>)</span><span class=w> </span><span class=k>END</span>
</code></pre></div> <p><img alt=5⃣ class=twemoji src=https://cdnjs.cloudflare.com/ajax/libs/twemoji/14.0.2/svg/35-20e3.svg title=:five:> Ajout des relations ACTED_IN</p> <p><div class=highlight><pre><span></span><code><span class=p>:</span><span class=n>auto</span><span class=w> </span><span class=k>USING</span><span class=w> </span><span class=n>PERIODIC</span><span class=w> </span><span class=k>COMMIT</span>
<span class=k>LOAD</span><span class=w> </span><span class=n>CSV</span><span class=w> </span><span class=k>WITH</span><span class=w> </span><span class=n>HEADERS</span>
<span class=k>FROM</span><span class=w> </span><span class=s1>&#39;https://data.neo4j.com/importing/2-movieData.csv&#39;</span>
<span class=k>AS</span><span class=w> </span><span class=k>row</span>
<span class=k>WITH</span><span class=w> </span><span class=k>row</span><span class=w> </span><span class=k>WHERE</span><span class=w> </span><span class=k>row</span><span class=p>.</span><span class=n>Entity</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=ss>&quot;Join&quot;</span><span class=w> </span><span class=k>AND</span><span class=w> </span><span class=k>row</span><span class=p>.</span><span class=k>Work</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=ss>&quot;Acting&quot;</span>
<span class=k>MATCH</span><span class=w> </span><span class=p>(</span><span class=n>p</span><span class=p>:</span><span class=n>Person</span><span class=w> </span><span class=err>{</span><span class=n>tmdbId</span><span class=p>:</span><span class=w> </span><span class=n>toInteger</span><span class=p>(</span><span class=k>row</span><span class=p>.</span><span class=n>tmdbId</span><span class=p>)</span><span class=err>}</span><span class=p>)</span>
<span class=k>MATCH</span><span class=w> </span><span class=p>(</span><span class=n>m</span><span class=p>:</span><span class=n>Movie</span><span class=w> </span><span class=err>{</span><span class=n>movieId</span><span class=p>:</span><span class=w> </span><span class=n>toInteger</span><span class=p>(</span><span class=k>row</span><span class=p>.</span><span class=n>movieId</span><span class=p>)</span><span class=err>}</span><span class=p>)</span>
<span class=n>MERGE</span><span class=w> </span><span class=p>(</span><span class=n>p</span><span class=p>)</span><span class=o>-</span><span class=p>[</span><span class=n>r</span><span class=p>:</span><span class=n>ACTED_IN</span><span class=p>]</span><span class=o>-&gt;</span><span class=p>(</span><span class=n>m</span><span class=p>)</span>
<span class=k>ON</span><span class=w> </span><span class=k>CREATE</span>
<span class=k>SET</span><span class=w> </span><span class=n>r</span><span class=p>.</span><span class=k>role</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>row</span><span class=p>.</span><span class=k>role</span>
<span class=k>SET</span><span class=w> </span><span class=n>p</span><span class=p>:</span><span class=n>Actor</span>
</code></pre></div> <img alt=6⃣ class=twemoji src=https://cdnjs.cloudflare.com/ajax/libs/twemoji/14.0.2/svg/36-20e3.svg title=:six:> Relation <strong>DIRECTED</strong></p> <p><div class=highlight><pre><span></span><code><span class=p>:</span><span class=n>auto</span><span class=w> </span><span class=k>USING</span><span class=w> </span><span class=n>PERIODIC</span><span class=w> </span><span class=k>COMMIT</span>
<span class=k>LOAD</span><span class=w> </span><span class=n>CSV</span><span class=w> </span><span class=k>WITH</span><span class=w> </span><span class=n>HEADERS</span>
<span class=k>FROM</span><span class=w> </span><span class=s1>&#39;https://data.neo4j.com/importing/2-movieData.csv&#39;</span>
<span class=k>AS</span><span class=w> </span><span class=k>row</span>
<span class=k>WITH</span><span class=w> </span><span class=k>row</span><span class=w> </span><span class=k>WHERE</span><span class=w> </span><span class=k>row</span><span class=p>.</span><span class=n>Entity</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=ss>&quot;Join&quot;</span><span class=w> </span><span class=k>AND</span><span class=w> </span><span class=k>row</span><span class=p>.</span><span class=k>Work</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=ss>&quot;Directing&quot;</span>
<span class=k>MATCH</span><span class=w> </span><span class=p>(</span><span class=n>p</span><span class=p>:</span><span class=n>Person</span><span class=w> </span><span class=err>{</span><span class=n>tmdbId</span><span class=p>:</span><span class=w> </span><span class=n>toInteger</span><span class=p>(</span><span class=k>row</span><span class=p>.</span><span class=n>tmdbId</span><span class=p>)</span><span class=err>}</span><span class=p>)</span>
<span class=k>MATCH</span><span class=w> </span><span class=p>(</span><span class=n>m</span><span class=p>:</span><span class=n>Movie</span><span class=w> </span><span class=err>{</span><span class=n>movieId</span><span class=p>:</span><span class=w> </span><span class=n>toInteger</span><span class=p>(</span><span class=k>row</span><span class=p>.</span><span class=n>movieId</span><span class=p>)</span><span class=err>}</span><span class=p>)</span>
<span class=n>MERGE</span><span class=w> </span><span class=p>(</span><span class=n>p</span><span class=p>)</span><span class=o>-</span><span class=p>[</span><span class=n>r</span><span class=p>:</span><span class=n>DIRECTED</span><span class=p>]</span><span class=o>-&gt;</span><span class=p>(</span><span class=n>m</span><span class=p>)</span>
<span class=k>ON</span><span class=w> </span><span class=k>CREATE</span>
<span class=k>SET</span><span class=w> </span><span class=n>r</span><span class=p>.</span><span class=k>role</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>row</span><span class=p>.</span><span class=k>role</span>
<span class=k>SET</span><span class=w> </span><span class=n>p</span><span class=p>:</span><span class=n>Director</span>
</code></pre></div> <img alt=7⃣ class=twemoji src=https://cdnjs.cloudflare.com/ajax/libs/twemoji/14.0.2/svg/37-20e3.svg title=:seven:> Noeuds <strong>User</strong></p> <div class=highlight><pre><span></span><code><span class=p>:</span><span class=n>auto</span><span class=w> </span><span class=k>USING</span><span class=w> </span><span class=n>PERIODIC</span><span class=w> </span><span class=k>COMMIT</span>
<span class=k>LOAD</span><span class=w> </span><span class=n>CSV</span><span class=w> </span><span class=k>WITH</span><span class=w> </span><span class=n>HEADERS</span>
<span class=k>FROM</span><span class=w> </span><span class=s1>&#39;https://data.neo4j.com/importing/2-ratingData.csv&#39;</span>
<span class=k>AS</span><span class=w> </span><span class=k>row</span>
<span class=k>MATCH</span><span class=w> </span><span class=p>(</span><span class=n>m</span><span class=p>:</span><span class=n>Movie</span><span class=w> </span><span class=err>{</span><span class=n>movieId</span><span class=p>:</span><span class=w> </span><span class=n>toInteger</span><span class=p>(</span><span class=k>row</span><span class=p>.</span><span class=n>movieId</span><span class=p>)</span><span class=err>}</span><span class=p>)</span>
<span class=n>MERGE</span><span class=w> </span><span class=p>(</span><span class=n>u</span><span class=p>:</span><span class=k>User</span><span class=w> </span><span class=err>{</span><span class=n>userId</span><span class=p>:</span><span class=w> </span><span class=n>toInteger</span><span class=p>(</span><span class=k>row</span><span class=p>.</span><span class=n>userId</span><span class=p>)</span><span class=err>}</span><span class=p>)</span>
<span class=k>ON</span><span class=w> </span><span class=k>CREATE</span><span class=w> </span><span class=k>SET</span><span class=w> </span><span class=n>u</span><span class=p>.</span><span class=n>name</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>row</span><span class=p>.</span><span class=n>name</span>
<span class=n>MERGE</span><span class=w> </span><span class=p>(</span><span class=n>u</span><span class=p>)</span><span class=o>-</span><span class=p>[</span><span class=n>r</span><span class=p>:</span><span class=n>RATED</span><span class=p>]</span><span class=o>-&gt;</span><span class=p>(</span><span class=n>m</span><span class=p>)</span>
<span class=k>ON</span><span class=w> </span><span class=k>CREATE</span><span class=w> </span><span class=k>SET</span><span class=w> </span><span class=n>r</span><span class=p>.</span><span class=n>rating</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>toInteger</span><span class=p>(</span><span class=k>row</span><span class=p>.</span><span class=n>rating</span><span class=p>),</span>
<span class=n>r</span><span class=p>.</span><span class=k>timestamp</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>toInteger</span><span class=p>(</span><span class=k>row</span><span class=p>.</span><span class=k>timestamp</span><span class=p>)</span>
</code></pre></div> <p>Le code complet :</p> <div class=highlight><pre><span></span><code><span class=o>//</span><span class=w> </span><span class=n>clear</span><span class=w> </span><span class=n>the</span><span class=w> </span><span class=n>graph</span>
<span class=k>MATCH</span><span class=w> </span><span class=p>(</span><span class=n>u</span><span class=p>:</span><span class=k>User</span><span class=p>)</span><span class=w> </span><span class=n>DETACH</span><span class=w> </span><span class=k>DELETE</span><span class=w> </span><span class=n>u</span><span class=p>;</span>
<span class=k>MATCH</span><span class=w> </span><span class=p>(</span><span class=n>p</span><span class=p>:</span><span class=n>Person</span><span class=p>)</span><span class=w> </span><span class=n>DETACH</span><span class=w> </span><span class=k>DELETE</span><span class=w> </span><span class=n>p</span><span class=p>;</span>
<span class=k>MATCH</span><span class=w> </span><span class=p>(</span><span class=n>m</span><span class=p>:</span><span class=n>Movie</span><span class=p>)</span><span class=w> </span><span class=n>DETACH</span><span class=w> </span><span class=k>DELETE</span><span class=w> </span><span class=n>m</span><span class=p>;</span>
<span class=k>MATCH</span><span class=w> </span><span class=p>(</span><span class=n>n</span><span class=p>)</span><span class=w> </span><span class=n>DETACH</span><span class=w> </span><span class=k>DELETE</span><span class=w> </span><span class=n>n</span><span class=p>;</span>
<span class=o>//</span><span class=w> </span><span class=n>make</span><span class=w> </span><span class=n>sure</span><span class=w> </span><span class=k>all</span><span class=w> </span><span class=k>constraints</span><span class=w> </span><span class=n>exist</span>
<span class=k>CREATE</span><span class=w> </span><span class=k>CONSTRAINT</span><span class=w> </span><span class=n>Genre_name</span><span class=w> </span><span class=k>IF</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>EXISTS</span>
<span class=k>FOR</span><span class=w> </span><span class=p>(</span><span class=n>x</span><span class=p>:</span><span class=n>Genre</span><span class=p>)</span>
<span class=n>REQUIRE</span><span class=w> </span><span class=n>x</span><span class=p>.</span><span class=n>name</span><span class=w> </span><span class=k>IS</span><span class=w> </span><span class=k>UNIQUE</span><span class=p>;</span>
<span class=k>CREATE</span><span class=w> </span><span class=k>CONSTRAINT</span><span class=w> </span><span class=n>Movie_movieId</span><span class=w> </span><span class=k>IF</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>EXISTS</span><span class=w> </span><span class=k>FOR</span><span class=w> </span><span class=p>(</span><span class=n>x</span><span class=p>:</span><span class=n>Movie</span><span class=p>)</span><span class=w> </span><span class=n>REQUIRE</span><span class=w> </span><span class=n>x</span><span class=p>.</span><span class=n>movieId</span><span class=w> </span><span class=k>IS</span><span class=w> </span><span class=k>UNIQUE</span><span class=p>;</span>
<span class=k>CREATE</span><span class=w> </span><span class=k>CONSTRAINT</span><span class=w> </span><span class=n>Person_tmdbId</span><span class=w> </span><span class=k>IF</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>EXISTS</span><span class=w> </span><span class=k>FOR</span><span class=w> </span><span class=p>(</span><span class=n>x</span><span class=p>:</span><span class=n>Person</span><span class=p>)</span><span class=w> </span><span class=n>REQUIRE</span><span class=w> </span><span class=n>x</span><span class=p>.</span><span class=n>tmdbId</span><span class=w> </span><span class=k>IS</span><span class=w> </span><span class=k>UNIQUE</span><span class=p>;</span>
<span class=k>CREATE</span><span class=w> </span><span class=k>CONSTRAINT</span><span class=w> </span><span class=n>User_userId</span><span class=w> </span><span class=k>IF</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>EXISTS</span><span class=w> </span><span class=k>FOR</span><span class=w> </span><span class=p>(</span><span class=n>x</span><span class=p>:</span><span class=k>User</span><span class=p>)</span><span class=w> </span><span class=n>REQUIRE</span><span class=w> </span><span class=n>x</span><span class=p>.</span><span class=n>userId</span><span class=w> </span><span class=k>IS</span><span class=w> </span><span class=k>UNIQUE</span><span class=p>;</span>
<span class=o>//</span><span class=w> </span><span class=n>import</span><span class=w> </span><span class=n>the</span><span class=w> </span><span class=n>Movie</span><span class=w> </span><span class=k>data</span>
<span class=p>:</span><span class=n>auto</span><span class=w> </span><span class=k>USING</span><span class=w> </span><span class=n>PERIODIC</span><span class=w> </span><span class=k>COMMIT</span>
<span class=k>LOAD</span><span class=w> </span><span class=n>CSV</span><span class=w> </span><span class=k>WITH</span><span class=w> </span><span class=n>HEADERS</span>
<span class=k>FROM</span><span class=w> </span><span class=s1>&#39;https://data.neo4j.com/importing/2-movieData.csv&#39;</span>
<span class=k>AS</span><span class=w> </span><span class=k>row</span>
<span class=o>//</span><span class=n>process</span><span class=w> </span><span class=k>only</span><span class=w> </span><span class=n>Movie</span><span class=w> </span><span class=k>rows</span>
<span class=k>WITH</span><span class=w> </span><span class=k>row</span><span class=w> </span><span class=k>WHERE</span><span class=w> </span><span class=k>row</span><span class=p>.</span><span class=n>Entity</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=ss>&quot;Movie&quot;</span>
<span class=n>MERGE</span><span class=w> </span><span class=p>(</span><span class=n>m</span><span class=p>:</span><span class=n>Movie</span><span class=w> </span><span class=err>{</span><span class=n>movieId</span><span class=p>:</span><span class=w> </span><span class=k>row</span><span class=p>.</span><span class=n>movieId</span><span class=err>}</span><span class=p>)</span>
<span class=k>ON</span><span class=w> </span><span class=k>CREATE</span><span class=w> </span><span class=k>SET</span>
<span class=n>m</span><span class=p>.</span><span class=n>tmdbId</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>row</span><span class=p>.</span><span class=n>tmdbId</span><span class=p>,</span>
<span class=n>m</span><span class=p>.</span><span class=n>imdbId</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>row</span><span class=p>.</span><span class=n>imdbId</span><span class=p>,</span>
<span class=n>m</span><span class=p>.</span><span class=n>imdbRating</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>toFloat</span><span class=p>(</span><span class=k>row</span><span class=p>.</span><span class=n>imdbRating</span><span class=p>),</span>
<span class=n>m</span><span class=p>.</span><span class=n>released</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>row</span><span class=p>.</span><span class=n>released</span><span class=p>,</span>
<span class=n>m</span><span class=p>.</span><span class=n>title</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>row</span><span class=p>.</span><span class=n>title</span><span class=p>,</span>
<span class=n>m</span><span class=p>.</span><span class=k>year</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>toInteger</span><span class=p>(</span><span class=k>row</span><span class=p>.</span><span class=k>year</span><span class=p>),</span>
<span class=n>m</span><span class=p>.</span><span class=n>poster</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>row</span><span class=p>.</span><span class=n>poster</span><span class=p>,</span>
<span class=n>m</span><span class=p>.</span><span class=n>runtime</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>toInteger</span><span class=p>(</span><span class=k>row</span><span class=p>.</span><span class=n>runtime</span><span class=p>),</span>
<span class=n>m</span><span class=p>.</span><span class=n>countries</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>split</span><span class=p>(</span><span class=k>coalesce</span><span class=p>(</span><span class=k>row</span><span class=p>.</span><span class=n>countries</span><span class=p>,</span><span class=ss>&quot;&quot;</span><span class=p>),</span><span class=w> </span><span class=ss>&quot;|&quot;</span><span class=p>),</span>
<span class=n>m</span><span class=p>.</span><span class=n>imdbVotes</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>toInteger</span><span class=p>(</span><span class=k>row</span><span class=p>.</span><span class=n>imdbVotes</span><span class=p>),</span>
<span class=n>m</span><span class=p>.</span><span class=n>revenue</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>toInteger</span><span class=p>(</span><span class=k>row</span><span class=p>.</span><span class=n>revenue</span><span class=p>),</span>
<span class=n>m</span><span class=p>.</span><span class=n>plot</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>row</span><span class=p>.</span><span class=n>plot</span><span class=p>,</span>
<span class=n>m</span><span class=p>.</span><span class=n>url</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>row</span><span class=p>.</span><span class=n>url</span><span class=p>,</span>
<span class=n>m</span><span class=p>.</span><span class=n>budget</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>toInteger</span><span class=p>(</span><span class=k>row</span><span class=p>.</span><span class=n>budget</span><span class=p>),</span>
<span class=n>m</span><span class=p>.</span><span class=n>languages</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>split</span><span class=p>(</span><span class=k>coalesce</span><span class=p>(</span><span class=k>row</span><span class=p>.</span><span class=n>languages</span><span class=p>,</span><span class=ss>&quot;&quot;</span><span class=p>),</span><span class=w> </span><span class=ss>&quot;|&quot;</span><span class=p>)</span>
<span class=k>WITH</span><span class=w> </span><span class=n>m</span><span class=p>,</span><span class=n>split</span><span class=p>(</span><span class=k>coalesce</span><span class=p>(</span><span class=k>row</span><span class=p>.</span><span class=n>genres</span><span class=p>,</span><span class=ss>&quot;&quot;</span><span class=p>),</span><span class=w> </span><span class=ss>&quot;|&quot;</span><span class=p>)</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=n>genres</span>
<span class=n>UNWIND</span><span class=w> </span><span class=n>genres</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=n>genre</span>
<span class=k>WITH</span><span class=w> </span><span class=n>m</span><span class=p>,</span><span class=w> </span><span class=n>genre</span>
<span class=n>MERGE</span><span class=w> </span><span class=p>(</span><span class=k>g</span><span class=p>:</span><span class=n>Genre</span><span class=w> </span><span class=err>{</span><span class=n>name</span><span class=p>:</span><span class=n>genre</span><span class=err>}</span><span class=p>)</span>
<span class=n>MERGE</span><span class=w> </span><span class=p>(</span><span class=n>m</span><span class=p>)</span><span class=o>-</span><span class=p>[:</span><span class=n>IN_GENRE</span><span class=p>]</span><span class=o>-&gt;</span><span class=p>(</span><span class=k>g</span><span class=p>);</span>
<span class=o>//</span><span class=w> </span><span class=n>import</span><span class=w> </span><span class=n>the</span><span class=w> </span><span class=n>Person</span><span class=w> </span><span class=k>data</span>
<span class=p>:</span><span class=n>auto</span><span class=w> </span><span class=k>USING</span><span class=w> </span><span class=n>PERIODIC</span><span class=w> </span><span class=k>COMMIT</span>
<span class=k>LOAD</span><span class=w> </span><span class=n>CSV</span><span class=w> </span><span class=k>WITH</span><span class=w> </span><span class=n>HEADERS</span>
<span class=k>FROM</span><span class=w> </span><span class=s1>&#39;https://data.neo4j.com/importing/2-movieData.csv&#39;</span>
<span class=k>AS</span><span class=w> </span><span class=k>row</span>
<span class=k>WITH</span><span class=w> </span><span class=k>row</span><span class=w> </span><span class=k>WHERE</span><span class=w> </span><span class=k>row</span><span class=p>.</span><span class=n>Entity</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=ss>&quot;Person&quot;</span>
<span class=n>MERGE</span><span class=w> </span><span class=p>(</span><span class=n>p</span><span class=p>:</span><span class=n>Person</span><span class=w> </span><span class=err>{</span><span class=n>tmdbId</span><span class=p>:</span><span class=w> </span><span class=k>row</span><span class=p>.</span><span class=n>tmdbId</span><span class=err>}</span><span class=p>)</span>
<span class=k>ON</span><span class=w> </span><span class=k>CREATE</span><span class=w> </span><span class=k>SET</span>
<span class=n>p</span><span class=p>.</span><span class=n>imdbId</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>row</span><span class=p>.</span><span class=n>imdbId</span><span class=p>,</span>
<span class=n>p</span><span class=p>.</span><span class=n>bornIn</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>row</span><span class=p>.</span><span class=n>bornIn</span><span class=p>,</span>
<span class=n>p</span><span class=p>.</span><span class=n>name</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>row</span><span class=p>.</span><span class=n>name</span><span class=p>,</span>
<span class=n>p</span><span class=p>.</span><span class=n>bio</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>row</span><span class=p>.</span><span class=n>bio</span><span class=p>,</span>
<span class=n>p</span><span class=p>.</span><span class=n>poster</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>row</span><span class=p>.</span><span class=n>poster</span><span class=p>,</span>
<span class=n>p</span><span class=p>.</span><span class=n>url</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>row</span><span class=p>.</span><span class=n>url</span><span class=p>,</span>
<span class=n>p</span><span class=p>.</span><span class=n>born</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>CASE</span><span class=w> </span><span class=k>row</span><span class=p>.</span><span class=n>born</span><span class=w> </span><span class=k>WHEN</span><span class=w> </span><span class=ss>&quot;&quot;</span><span class=w> </span><span class=k>THEN</span><span class=w> </span><span class=k>null</span><span class=w> </span><span class=k>ELSE</span><span class=w> </span><span class=nb>date</span><span class=p>(</span><span class=k>row</span><span class=p>.</span><span class=n>born</span><span class=p>)</span><span class=w> </span><span class=k>END</span><span class=p>,</span>
<span class=n>p</span><span class=p>.</span><span class=n>died</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>CASE</span><span class=w> </span><span class=k>row</span><span class=p>.</span><span class=n>died</span><span class=w> </span><span class=k>WHEN</span><span class=w> </span><span class=ss>&quot;&quot;</span><span class=w> </span><span class=k>THEN</span><span class=w> </span><span class=k>null</span><span class=w> </span><span class=k>ELSE</span><span class=w> </span><span class=nb>date</span><span class=p>(</span><span class=k>row</span><span class=p>.</span><span class=n>died</span><span class=p>)</span><span class=w> </span><span class=k>END</span><span class=p>;</span>
<span class=o>//</span><span class=w> </span><span class=k>set</span><span class=w> </span><span class=n>ACTED_IN</span><span class=w> </span><span class=n>relationships</span><span class=w> </span><span class=k>and</span><span class=w> </span><span class=n>Actor</span><span class=w> </span><span class=n>labels</span>
<span class=p>:</span><span class=n>auto</span><span class=w> </span><span class=k>USING</span><span class=w> </span><span class=n>PERIODIC</span><span class=w> </span><span class=k>COMMIT</span>
<span class=k>LOAD</span><span class=w> </span><span class=n>CSV</span><span class=w> </span><span class=k>WITH</span><span class=w> </span><span class=n>HEADERS</span>
<span class=k>FROM</span><span class=w> </span><span class=s1>&#39;https://data.neo4j.com/importing/2-movieData.csv&#39;</span>
<span class=k>AS</span><span class=w> </span><span class=k>row</span>
<span class=k>WITH</span><span class=w> </span><span class=k>row</span><span class=w> </span><span class=k>WHERE</span><span class=w> </span><span class=k>row</span><span class=p>.</span><span class=n>Entity</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=ss>&quot;Join&quot;</span><span class=w> </span><span class=k>AND</span><span class=w> </span><span class=k>row</span><span class=p>.</span><span class=k>Work</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=ss>&quot;Acting&quot;</span>
<span class=k>MATCH</span><span class=w> </span><span class=p>(</span><span class=n>p</span><span class=p>:</span><span class=n>Person</span><span class=w> </span><span class=err>{</span><span class=n>tmdbId</span><span class=p>:</span><span class=w> </span><span class=k>row</span><span class=p>.</span><span class=n>tmdbId</span><span class=err>}</span><span class=p>)</span>
<span class=k>MATCH</span><span class=w> </span><span class=p>(</span><span class=n>m</span><span class=p>:</span><span class=n>Movie</span><span class=w> </span><span class=err>{</span><span class=n>movieId</span><span class=p>:</span><span class=w> </span><span class=k>row</span><span class=p>.</span><span class=n>movieId</span><span class=err>}</span><span class=p>)</span>
<span class=n>MERGE</span><span class=w> </span><span class=p>(</span><span class=n>p</span><span class=p>)</span><span class=o>-</span><span class=p>[</span><span class=n>r</span><span class=p>:</span><span class=n>ACTED_IN</span><span class=p>]</span><span class=o>-&gt;</span><span class=p>(</span><span class=n>m</span><span class=p>)</span>
<span class=k>ON</span><span class=w> </span><span class=k>CREATE</span>
<span class=k>SET</span><span class=w> </span><span class=n>r</span><span class=p>.</span><span class=k>role</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>row</span><span class=p>.</span><span class=k>role</span>
<span class=k>SET</span><span class=w> </span><span class=n>p</span><span class=p>:</span><span class=n>Actor</span><span class=p>;</span>
<span class=o>//</span><span class=w> </span><span class=k>set</span><span class=w> </span><span class=n>DIRECTED</span><span class=w> </span><span class=n>relationships</span><span class=w> </span><span class=k>and</span><span class=w> </span><span class=n>Director</span><span class=w> </span><span class=n>labels</span>
<span class=p>:</span><span class=n>auto</span><span class=w> </span><span class=k>USING</span><span class=w> </span><span class=n>PERIODIC</span><span class=w> </span><span class=k>COMMIT</span>
<span class=k>LOAD</span><span class=w> </span><span class=n>CSV</span><span class=w> </span><span class=k>WITH</span><span class=w> </span><span class=n>HEADERS</span>
<span class=k>FROM</span><span class=w> </span><span class=s1>&#39;https://data.neo4j.com/importing/2-movieData.csv&#39;</span>
<span class=k>AS</span><span class=w> </span><span class=k>row</span>
<span class=k>WITH</span><span class=w> </span><span class=k>row</span><span class=w> </span><span class=k>WHERE</span><span class=w> </span><span class=k>row</span><span class=p>.</span><span class=n>Entity</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=ss>&quot;Join&quot;</span><span class=w> </span><span class=k>AND</span><span class=w> </span><span class=k>row</span><span class=p>.</span><span class=k>Work</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=ss>&quot;Directing&quot;</span>
<span class=k>MATCH</span><span class=w> </span><span class=p>(</span><span class=n>p</span><span class=p>:</span><span class=n>Person</span><span class=w> </span><span class=err>{</span><span class=n>tmdbId</span><span class=p>:</span><span class=w> </span><span class=k>row</span><span class=p>.</span><span class=n>tmdbId</span><span class=err>}</span><span class=p>)</span>
<span class=k>MATCH</span><span class=w> </span><span class=p>(</span><span class=n>m</span><span class=p>:</span><span class=n>Movie</span><span class=w> </span><span class=err>{</span><span class=n>movieId</span><span class=p>:</span><span class=w> </span><span class=k>row</span><span class=p>.</span><span class=n>movieId</span><span class=err>}</span><span class=p>)</span>
<span class=n>MERGE</span><span class=w> </span><span class=p>(</span><span class=n>p</span><span class=p>)</span><span class=o>-</span><span class=p>[</span><span class=n>r</span><span class=p>:</span><span class=n>DIRECTED</span><span class=p>]</span><span class=o>-&gt;</span><span class=p>(</span><span class=n>m</span><span class=p>)</span>
<span class=k>ON</span><span class=w> </span><span class=k>CREATE</span>
<span class=k>SET</span><span class=w> </span><span class=n>r</span><span class=p>.</span><span class=k>role</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>row</span><span class=p>.</span><span class=k>role</span>
<span class=k>SET</span><span class=w> </span><span class=n>p</span><span class=p>:</span><span class=n>Director</span><span class=p>;</span>
<span class=o>//</span><span class=w> </span><span class=n>import</span><span class=w> </span><span class=n>the</span><span class=w> </span><span class=k>User</span><span class=w> </span><span class=k>data</span>
<span class=p>:</span><span class=n>auto</span><span class=w> </span><span class=k>USING</span><span class=w> </span><span class=n>PERIODIC</span><span class=w> </span><span class=k>COMMIT</span>
<span class=k>LOAD</span><span class=w> </span><span class=n>CSV</span><span class=w> </span><span class=k>WITH</span><span class=w> </span><span class=n>HEADERS</span>
<span class=k>FROM</span><span class=w> </span><span class=s1>&#39;https://data.neo4j.com/importing/2-ratingData.csv&#39;</span>
<span class=k>AS</span><span class=w> </span><span class=k>row</span>
<span class=k>MATCH</span><span class=w> </span><span class=p>(</span><span class=n>m</span><span class=p>:</span><span class=n>Movie</span><span class=w> </span><span class=err>{</span><span class=n>movieId</span><span class=p>:</span><span class=w> </span><span class=k>row</span><span class=p>.</span><span class=n>movieId</span><span class=err>}</span><span class=p>)</span>
<span class=n>MERGE</span><span class=w> </span><span class=p>(</span><span class=n>u</span><span class=p>:</span><span class=k>User</span><span class=w> </span><span class=err>{</span><span class=n>userId</span><span class=p>:</span><span class=w> </span><span class=k>row</span><span class=p>.</span><span class=n>userId</span><span class=err>}</span><span class=p>)</span>
<span class=k>ON</span><span class=w> </span><span class=k>CREATE</span><span class=w> </span><span class=k>SET</span><span class=w> </span><span class=n>u</span><span class=p>.</span><span class=n>name</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>row</span><span class=p>.</span><span class=n>name</span>
<span class=n>MERGE</span><span class=w> </span><span class=p>(</span><span class=n>u</span><span class=p>)</span><span class=o>-</span><span class=p>[</span><span class=n>r</span><span class=p>:</span><span class=n>RATED</span><span class=p>]</span><span class=o>-&gt;</span><span class=p>(</span><span class=n>m</span><span class=p>)</span>
<span class=k>ON</span><span class=w> </span><span class=k>CREATE</span><span class=w> </span><span class=k>SET</span><span class=w> </span><span class=n>r</span><span class=p>.</span><span class=n>rating</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>toInteger</span><span class=p>(</span><span class=k>row</span><span class=p>.</span><span class=n>rating</span><span class=p>),</span>
<span class=n>r</span><span class=p>.</span><span class=k>timestamp</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>toInteger</span><span class=p>(</span><span class=k>row</span><span class=p>.</span><span class=k>timestamp</span><span class=p>)</span>
</code></pre></div> <details class=info open=open> <summary>Dossier import</summary> <p>Pour importer des fichiers CSV sur la machine locale, il faut les placer dans le dossier <code>import</code> sous le dossier d'installation de Neo4j.</p> <p>Pour le container docker ce dossier est sous le chemin <code>/var/lib/neo4j/import</code>. <div class=highlight><pre><span></span><code>docker<span class=w> </span>cp<span class=w> </span>movieData<span class=w> </span>neo4j:/var/lib/neo4j/import
</code></pre></div> ou <code>movieData</code> est un dossier contenant les fichiers CSV.</p> </details> <h2 id=exercice>Exercice <img alt=💻 class=twemoji src=https://cdnjs.cloudflare.com/ajax/libs/twemoji/14.0.2/svg/1f4bb.svg title=:computer:><a class=headerlink href=#exercice title="Permanent link">&para;</a></h2> <p><img alt=🍕 class=twemoji src=https://cdnjs.cloudflare.com/ajax/libs/twemoji/14.0.2/svg/1f355.svg title=:pizza:><img alt=🍝 class=twemoji src=https://cdnjs.cloudflare.com/ajax/libs/twemoji/14.0.2/svg/1f35d.svg title=:spaghetti:><img alt=🍔 class=twemoji src=https://cdnjs.cloudflare.com/ajax/libs/twemoji/14.0.2/svg/1f354.svg title=:hamburger:> <strong>Données sur les restaurants et leurs inspections</strong></p> <ul> <li>Télécharger l'archive <a href=https://mega.nz/file/nnpykR7I#hEya4htl4IUhkKQN0gloi5Kd9MJ9tQkg9loNqwhXzBM>restaurants.zip</a></li> <li>Décompresser le contenu</li> <li>Examiner le contenu des fichiers csv (voir ci-dessous)</li> </ul> <p>Il s'agit de données concernant des restaurant de New York et les résultats des inspections réalisées à ces derniers. Ces données sont respectivement dans les fichiers <code>restaurants.csv</code> et <code>restaurants_inspecteions.csv</code>.</p> <p><img alt=restaurants src=assets/images/etl/restaurants.png></p> <p><img alt=inspections src=assets/images/etl/inspections.png></p> <p><img alt=📋 class=twemoji src=https://cdnjs.cloudflare.com/ajax/libs/twemoji/14.0.2/svg/1f4cb.svg title=:clipboard:> <strong>Travail à faire</strong></p> <p><img alt=⬇ class=twemoji src=https://cdnjs.cloudflare.com/ajax/libs/twemoji/14.0.2/svg/2b07.svg title=:arrow_down:> Importer les données sur Neo4j en créant le graphe de données (à exporter sous le format PNG) en considérant les requêtes suivantes :</p> <ul> <li>Chercher les restaurants par spécialité (cuisinetype).</li> <li>Chercher les restaurants par Quartier (borough).</li> <li>Chercher les restaurants par code de violation.</li> </ul> <p><img alt=🔎 class=twemoji src=https://cdnjs.cloudflare.com/ajax/libs/twemoji/14.0.2/svg/1f50e.svg title=:mag_right:> Donner les requêtes Cypher pour trouver :</p> <ol> <li>Les restaurants de spécialité chinoise dans le quartier du QUEENS.</li> <li>Le restaurant ayant commis le plus grand nombre de violations.</li> <li>Les restaurants du BRONX ayant des violations de code 04L.</li> </ol> </article> </div> </div> <a href=# class="md-top md-icon" data-md-component=top hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg> Retour en haut de la page </a> </main> <footer class=md-footer> <nav class="md-footer__inner md-grid" aria-label="Pied de page"> <a href=cypher.html class="md-footer__link md-footer__link--prev" aria-label="Précédent: Cypher" rel=prev> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </div> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> Précédent </span> Cypher </div> </div> </a> <a href=python.html class="md-footer__link md-footer__link--next" aria-label="Suivant: Pilote Python" rel=next> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> Suivant </span> Pilote Python </div> </div> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg> </div> </a> </nav> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> <div class=md-copyright__highlight> Copyright &copy; 2022 - Dr. Hmida Hmida </div> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> <div class=md-social> <a href=https://gitlab.com/hhmida target=_blank rel=noopener title=gitlab.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="m503.5 204.6-.7-1.8-69.7-181.78c-1.4-3.57-3.9-6.59-7.2-8.64-2.4-1.55-5.1-2.515-8-2.81-2.9-.295-5.7.083-8.4 1.11-2.7 1.02-5.1 2.66-7.1 4.78-1.9 2.12-3.3 4.67-4.1 7.44l-47 144H160.8l-47.1-144c-.8-2.77-2.2-5.31-4.1-7.43-2-2.12-4.4-3.75-7.1-4.77a18.1 18.1 0 0 0-8.38-1.113 18.4 18.4 0 0 0-8.04 2.793 18.09 18.09 0 0 0-7.16 8.64L9.267 202.8l-.724 1.8a129.57 129.57 0 0 0-3.52 82c7.747 26.9 24.047 50.7 46.447 67.6l.27.2.59.4 105.97 79.5 52.6 39.7 32 24.2c3.7 1.9 8.3 4.3 13 4.3 4.7 0 9.3-2.4 13-4.3l32-24.2 52.6-39.7 106.7-79.9.3-.3c22.4-16.9 38.7-40.6 45.6-67.5 8.6-27 7.4-55.8-2.6-82z"/></svg> </a> <a href=https://github.com/hhmida target=_blank rel=noopener title=github.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 480 512"><!-- Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M186.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1zM480 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2zm-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3zm-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1z"/></svg> </a> <a href=https://linkedin.com/in/hhmida target=_blank rel=noopener title=linkedin.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": ".", "features": ["navigation.tabs", "navigation.tabs.sticky", "navigation.top", "toc.integrate", "content.code.annotate", "content.code.copy", "navigation.footer"], "search": "assets/javascripts/workers/search.e5c33ebb.min.js", "translations": {"clipboard.copied": "Copi\u00e9 dans le presse-papier", "clipboard.copy": "Copier dans le presse-papier", "search.result.more.one": "1 de plus sur cette page", "search.result.more.other": "# de plus sur cette page", "search.result.none": "Aucun document trouv\u00e9", "search.result.one": "1 document trouv\u00e9", "search.result.other": "# documents trouv\u00e9s", "search.result.placeholder": "Taper pour d\u00e9marrer la recherche", "search.result.term.missing": "Non trouv\u00e9", "select.version": "S\u00e9lectionner la version"}}</script> <script src=assets/javascripts/bundle.ba449ae6.min.js></script> </body> </html>